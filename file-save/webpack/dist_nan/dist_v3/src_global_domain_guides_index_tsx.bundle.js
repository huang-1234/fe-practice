(self["webpackChunkwebpack_zero"] = self["webpackChunkwebpack_zero"] || []).push([["src_global_domain_guides_index_tsx"],{

/***/ "./src/global/domain/guides/data/popovers-2024-12-29.json":
/*!****************************************************************!*\
  !*** ./src/global/domain/guides/data/popovers-2024-12-29.json ***!
  \****************************************************************/
/***/ ((module) => {

module.exports = [{"pathname":"","instances":[{"id":"guide_popovers_shophome_product_share","type":"PopoverGuide","trigger":"hover","userType":[23],"selectors":{"targetSelector":".operations__btn__product__share_action"},"content":{"title":"支持Title","desc":"支持Description"},"style":{"placement":"bottomRight","align":{"offset":[18,7]},"zIndex":999,"dotStyle":{"left":"70px"}}},{"id":"guide_popovers_shophome_orientation_plan_product_share","type":"PopoverGuide","trigger":"hover","userType":[11],"selectors":{"targetSelector":".daren-promotion-list-ctn .common-plan-container-content-table-operations__btn__product__share_action"},"content":{"title":"支持分享商品啦","desc":"复制链接/口令给达人，助力达人高效操作"},"style":{"placement":"bottomRight","align":{"offset":[18,7]},"zIndex":999,"dotStyle":{"left":"70px"}}},{"id":"guide_popovers_shophome_tiered_plan_product_share","type":"PopoverGuide","trigger":"hover","userType":[11],"selectors":{"targetSelector":".index-module__tieredTableBg___MVepV .common-plan-container-content-table-operations__btn__product__share_action"},"content":{"title":"支持分享商品啦","desc":"复制链接/口令给达人，助力达人高效操作"},"style":{"placement":"bottomRight","align":{"offset":[18,7]},"zIndex":999,"dotStyle":{"left":"70px"}}}]},{"pathname":"/dashboard/activity/common-plan","instances":[{"id":"guide_popovers_shophome_product_common_plan_one","priority":[4],"type":"PopoverGuide","userType":[11],"outdateTime":"2024-12-29","selectors":{"popupContainerSelector":".auxo-table-body","targetSelector":".exclusive_commodity-filter-drawer .auxo-table-tbody .auxo-checkbox-wrapper"},"content":{"title":"步骤1｜圈选要推广的商品","desc":"根据店铺自身经营诉求，选择要推广的商品","okText":"下一步"},"style":{"placement":"bottomRight","align":{"offset":[12,22]},"zIndex":999,"dotStyle":{"left":"70px"}}},{"id":"guide_popovers_shophome_product_common_plan_two","priority":[3],"type":"PopoverGuide","userType":[11],"outdateTime":"2024-12-29","selectors":{"popupContainerSelector":".auxo-drawer-wrapper-body","targetSelector":".exclusive_commodity-filter-drawer-footer-operations__operation span"},"content":{"title":"步骤2｜点击下一步","desc":"选择商品后，为商品设置佣金率、发票和申样规则","okText":"下一步"},"style":{"placement":"bottomRight","align":{"offset":[2,22]},"zIndex":999,"dotStyle":{"left":"70px"}}},{"id":"guide_popovers_shophome_product_common_plan_three","priority":[2],"type":"PopoverGuide","userType":[11],"outdateTime":"2024-12-29","selectors":{"popupContainerSelector":".auxo-drawer-wrapper-body","targetSelector":".common-module__tipButton___1rabF"},"content":{"title":"步骤3｜设置佣金","desc":"可查看佣金设置建议和结算规则","okText":"下一步"},"style":{"placement":"bottomRight","align":{"offset":[-42,24]},"zIndex":999,"dotStyle":{"left":"70px"}}},{"id":"guide_popovers_shophome_product_common_plan_four","priority":[1],"type":"PopoverGuide","userType":[11],"outdateTime":"2024-12-29","selectors":{"popupContainerSelector":".auxo-drawer-wrapper-body","targetSelector":".exclusive_commodity-filter-drawer-footer-operations__operation__2"},"content":{"title":"步骤4｜完成创建","desc":"点击确定，完成普通计划的创建","okText":"完成"},"style":{"placement":"bottomRight","align":{"offset":[-22,12]},"zIndex":999}}]},{"pathname":"/dashboard/activity/exclusive-plan","instances":[{"id":"guide_popovers_shophome_product_exclusive_plan_one","priority":[4],"type":"PopoverGuide","userType":[11],"outdateTime":"2024-12-29","selectors":{"popupContainerSelector":".auxo-table-body","targetSelector":".exclusive_commodity-filter-drawer .auxo-table-tbody .auxo-checkbox-wrapper"},"content":{"title":"步骤1｜圈选要推广的商品","desc":"根据店铺自身经营诉求，选择要推广的商品","okText":"下一步"},"style":{"placement":"bottomRight","align":{"offset":[12,22]},"zIndex":999,"dotStyle":{"left":"70px"}}},{"id":"guide_popovers_shophome_product_exclusive_plan_two","priority":[3],"type":"PopoverGuide","userType":[11],"outdateTime":"2024-12-29","selectors":{"popupContainerSelector":".auxo-drawer-wrapper-body","targetSelector":".exclusive_commodity-filter-drawer-footer-operations__operation span"},"content":{"title":"步骤2｜点击下一步","desc":"选择商品后，为商品设置佣金率、发票和申样规则","okText":"下一步"},"style":{"placement":"bottomRight","align":{"offset":[2,22]},"zIndex":999,"dotStyle":{"left":"70px"}}},{"id":"guide_popovers_shophome_product_exclusive_plan_three","priority":[2],"type":"PopoverGuide","userType":[11],"outdateTime":"2024-12-29","selectors":{"popupContainerSelector":".auxo-drawer-wrapper-body","targetSelector":".common-module__tipButton___1rabF"},"content":{"title":"步骤3｜设置佣金","desc":"可查看佣金设置建议和结算规则","okText":"下一步"},"style":{"placement":"bottomRight","align":{"offset":[-42,24]},"zIndex":999,"dotStyle":{"left":"70px"}}},{"id":"guide_popovers_shophome_product_exclusive_plan_four","priority":[1],"type":"PopoverGuide","userType":[11],"outdateTime":"2024-12-29","selectors":{"popupContainerSelector":".auxo-drawer-wrapper-body","targetSelector":".exclusive_commodity-filter-drawer-footer-operations__operation__2"},"content":{"title":"步骤4｜完成创建","desc":"点击确定，完成专属计划的创建","okText":"完成"},"style":{"placement":"bottomRight","align":{"offset":[-22,12]},"zIndex":999}}]}]

/***/ }),

/***/ "./src/global/domain/abTest.ts":
/*!*************************************!*\
  !*** ./src/global/domain/abTest.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getABTestConfig: () => (/* binding */ getABTestConfig)
/* harmony export */ });
/* harmony import */ var _global_utils_routers_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @global/utils/routers/query */ "./src/global/utils/routers/query.ts");

const getABTestConfig = (key, defaultValue = false) => {
  var _a, _b;
  let val = defaultValue;
  if (process.env.PROXY_ENV === "mock" || process.env.PROXY_ENV === "boe" || process.env.BUILD_ENV === "boe" || "development" === "development") {
    const { _ab } = (0,_global_utils_routers_query__WEBPACK_IMPORTED_MODULE_0__.getQuery)();
    try {
      val = (_b = (_a = JSON.parse(_ab)) == null ? void 0 : _a[key]) != null ? _b : defaultValue;
    } catch (error) {
      val = defaultValue;
    }
  }
  return new Promise((resolve, reject) => {
    try {
      resolve({});
    } catch (e) {
      reject(e);
    }
  });
};


/***/ }),

/***/ "./src/global/domain/guides/components/base.ts":
/*!*****************************************************!*\
  !*** ./src/global/domain/guides/components/base.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BaseGuide: () => (/* binding */ BaseGuide),
/* harmony export */   DestroyHook: () => (/* binding */ DestroyHook),
/* harmony export */   getExternalInfo: () => (/* binding */ getExternalInfo)
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ "./src/global/domain/guides/utils/index.ts");
/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core */ "./src/global/domain/guides/core/index.ts");
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));


class BaseGuide {
  constructor(rawOption) {
    this.rawOption = rawOption;
  }
  extendsOption(listeners) {
    var _a;
    const outdateTime = _utils__WEBPACK_IMPORTED_MODULE_0__.CacheService.getOutdateTime(
      this.rawOption.outdateTime,
      (_a = _core__WEBPACK_IMPORTED_MODULE_1__.GuideRender.cachedMap.get(this.rawOption.id)) == null ? void 0 : _a.outdateTime
    );
    const isOutdated = _utils__WEBPACK_IMPORTED_MODULE_0__.CacheService.isOutdated(outdateTime);
    const commonOption = {
      isOutdated,
      isMounted: false,
      destroyHook: new DestroyHook(),
      listeners
    };
    return __spreadProps(__spreadValues(__spreadValues({}, this.rawOption), commonOption), {
      outdateTime
    });
  }
  setOutdate() {
    this.option.isOutdated = true;
    this.option.outdateTime = Date.now();
    _core__WEBPACK_IMPORTED_MODULE_1__.GuideRender.updateCache();
  }
  clear() {
    var _a;
    if (!this.option.isMounted)
      return;
    this.option.isMounted = false;
    (_a = this.option.destroyHook) == null ? void 0 : _a.call();
  }
  start() {
    if (this.option.isOutdated)
      return;
    _core__WEBPACK_IMPORTED_MODULE_1__.GuideRender.observer.observe(this.option.id, {
      id: this.option.id,
      priority: this.option.priority,
      runWithNoPriority: this.option.runWithNoPriority,
      selectors: this.observerSelectors,
      render: () => this.render(),
      clear: () => this.clear()
    });
  }
  guardRender(mount) {
    if (this.option.isMounted || this.option.isOutdated)
      return;
    this.option.isMounted = true;
    mount();
  }
}
class DestroyHook {
  use(callback) {
    this.destroyCallback = callback;
  }
  call() {
    var _a;
    (_a = this.destroyCallback) == null ? void 0 : _a.call(this);
  }
}
const getExternalInfo = (external) => {
  if (!external)
    return;
  const isObj = typeof external === "object";
  const defaultText = "\u5E2E\u52A9\u4E2D\u5FC3";
  const defaultUrl = "https://school.jinritemai.com/doudian/web/";
  return isObj ? { text: external.text || defaultText, url: external.url || defaultUrl } : { text: defaultText, url: defaultUrl };
};


/***/ }),

/***/ "./src/global/domain/guides/components/data.ts":
/*!*****************************************************!*\
  !*** ./src/global/domain/guides/components/data.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GuideComponentType: () => (/* binding */ GuideComponentType),
/* harmony export */   guideComponentMap: () => (/* binding */ guideComponentMap)
/* harmony export */ });
/* harmony import */ var _hints__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hints */ "./src/global/domain/guides/components/hints/index.tsx");
/* harmony import */ var _popovers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./popovers */ "./src/global/domain/guides/components/popovers/index.tsx");
/* harmony import */ var _tours__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tours */ "./src/global/domain/guides/components/tours/index.tsx");



var GuideComponentType = /* @__PURE__ */ ((GuideComponentType2) => {
  GuideComponentType2["HintGuide"] = "HintGuide";
  GuideComponentType2["PopoverGuide"] = "PopoverGuide";
  GuideComponentType2["TourGuide"] = "TourGuide";
  return GuideComponentType2;
})(GuideComponentType || {});
const guideComponentMap = /* @__PURE__ */ new Map([
  // [引导类型, [引导组件, 优先级, 页内热更新]]
  ["TourGuide" /* TourGuide */, [_tours__WEBPACK_IMPORTED_MODULE_2__.TourGuide, 10, false]],
  ["PopoverGuide" /* PopoverGuide */, [_popovers__WEBPACK_IMPORTED_MODULE_1__.PopoverGuide, 0, true]],
  ["HintGuide" /* HintGuide */, [_hints__WEBPACK_IMPORTED_MODULE_0__.HintGuide, 0, false]]
]);


/***/ }),

/***/ "./src/global/domain/guides/components/devtool/component.tsx":
/*!*******************************************************************!*\
  !*** ./src/global/domain/guides/components/devtool/component.tsx ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DevtoolComponent: () => (/* binding */ DevtoolComponent),
/* harmony export */   getPlaceholderContent: () => (/* binding */ getPlaceholderContent)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ "./src/global/domain/guides/utils/index.ts");
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));


const DevtoolComponent = ({ data, onPreview }) => {
  const [expand, setExpand] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);
  const [checked, setChecked] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);
  const [content, setContent] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");
  const [panelWidth, setPanelWidth] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(500);
  const textareaRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const panelRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const dragctrlRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const handlePreview = () => {
    var _a;
    const content2 = ((_a = textareaRef.current) == null ? void 0 : _a.value) || "";
    const data2 = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.JSONParse)(content2) || [];
    if (!data2.length)
      return;
    onPreview(data2);
    _utils__WEBPACK_IMPORTED_MODULE_1__.CacheService.set("devtool", (0,_utils__WEBPACK_IMPORTED_MODULE_1__.getPathIdentifier)(), {
      checked,
      content: content2
    });
  };
  const handleCheck = (id) => {
    let newChecked = [];
    if (checked.includes(id)) {
      newChecked = checked.filter((it) => it !== id);
    } else {
      newChecked = [...checked, id];
    }
    const newCheckedData = getCheckedData(newChecked);
    const newContent = JSON.stringify(newCheckedData, null, 2);
    handleUpdate(newChecked, newCheckedData.length ? newContent : "");
  };
  const getCheckedData = (ids) => {
    const checkdData = [];
    if (ids.length) {
      data.forEach((it) => {
        const item = __spreadProps(__spreadValues({}, it), { instances: [] });
        it.instances.forEach((ins) => {
          if (ids.includes(ins.id)) {
            item.instances.push(ins);
          }
        });
        if (item.instances.length) {
          checkdData.push(item);
        }
      });
    }
    return checkdData;
  };
  const handleUpdate = (checked2, content2) => {
    setChecked(checked2 || []);
    setContent(content2 || "");
  };
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    var _a;
    if (expand) {
      let startOffset = 0;
      const onMouseMove = (e) => {
        setPanelWidth(startOffset - e.pageX);
      };
      const onMouseUp = () => {
        document.removeEventListener("mousemove", onMouseMove);
        document.removeEventListener("mouseup", onMouseUp);
      };
      const onMouseDown = (e) => {
        if (panelRef.current) {
          startOffset = panelRef.current.offsetWidth + e.pageX;
          document.addEventListener("mousemove", onMouseMove);
          document.addEventListener("mouseup", onMouseUp);
        }
      };
      (_a = dragctrlRef.current) == null ? void 0 : _a.addEventListener("mousedown", onMouseDown);
      return () => {
        var _a2;
        (_a2 = dragctrlRef.current) == null ? void 0 : _a2.removeEventListener("mousedown", onMouseDown);
        document.removeEventListener("mousemove", onMouseMove);
        document.removeEventListener("mouseup", onMouseUp);
      };
    }
  }, [expand]);
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (expand) {
      const cachedInfo = _utils__WEBPACK_IMPORTED_MODULE_1__.CacheService.get("devtool", (0,_utils__WEBPACK_IMPORTED_MODULE_1__.getPathIdentifier)()) || {
        checked: [],
        content: ""
      };
      handleUpdate([], cachedInfo == null ? void 0 : cachedInfo.content);
    }
  }, [expand]);
  if (expand) {
    const pathname = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.getPathIdentifier)();
    const currPathData = data.filter((it) => !it.pathname || it.pathname === pathname).reduce((acc, curr) => acc.concat(curr.instances), []);
    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { ref: panelRef, className: "guide-devtool show-panel", style: { width: panelWidth } }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-devtool-header" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, "\u65B0\u624B\u5F15\u5BFC\u914D\u7F6E\u9762\u677F"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", { className: "guide-devtool-button", onClick: handlePreview }, "\u9884\u89C8"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", { className: "guide-devtool-button", onClick: () => setExpand(false) }, "\u5173\u95ED"))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-devtool-body" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-devtool-label" }, "\u5F53\u524D\u9875\u9762\u751F\u6548\u7684\u5F15\u5BFC\u5217\u8868"), currPathData.length ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("table", { className: "guide-devtool-table" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("thead", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", null, "\u64CD\u4F5C"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", null, "\u5F15\u5BFCID"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", null, "\u5F15\u5BFC\u7EC4\u4EF6"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", null, "\u4F18\u5148\u7EA7"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", null, "\u7528\u6237"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("th", null, "\u8FC7\u671F\u65F6\u95F4"))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("tbody", null, currPathData.map((it) => {
      return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(
        "tr",
        {
          key: it.id,
          className: checked.includes(it.id) ? "checked" : "",
          onClick: () => handleCheck(it.id)
        },
        /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("input", { type: "checkbox", readOnly: true, checked: checked.includes(it.id) })),
        /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", null, it.id),
        /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", null, it.type),
        /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", null, it.priority || "-"),
        /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", null, (it.userType || []).join(",") || "-"),
        /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("td", null, it.outdateTime || "-")
      );
    }))) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-devtool-empty" }, "\u672C\u9875\u6682\u65E0\u65B0\u624B\u5F15\u5BFC"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-devtool-label" }, "\u5F15\u5BFC\u914D\u7F6E\u9879"), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(
      "textarea",
      {
        ref: textareaRef,
        className: "guide-devtool-editor",
        rows: 15,
        placeholder: getPlaceholderContent(),
        value: content,
        onChange: (evt) => handleUpdate(checked, evt.target.value)
      }
    ), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-devtool-label" }, "\u914D\u7F6E\u793A\u4F8B\u53C2\u8003:", /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(
      "a",
      {
        href: "https://bytedance.feishu.cn/docx/doxcnn9Zh82TBqz8htU7Phbqv0v#",
        target: "_blank",
        rel: "noopener noreferrer"
      },
      "https://bytedance.feishu.cn/docx/doxcnn9Zh82TBqz8htU7Phbqv0v#"
    ))), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { ref: dragctrlRef, className: "guide-devtool-dragctrl" }));
  } else {
    return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-devtool show-icon", onClick: () => setExpand(true) }, "\u65B0\u624B\u5F15\u5BFC");
  }
};
const getPlaceholderContent = () => {
  return `\u5F15\u5BFC\u914D\u7F6E\u683C\u5F0F:
    [
      { 
        "pathname": "",
        "instances": [
          {
            "id": "xxxx",
            "type": "PopoverGuide",
            "outdateTime": "2021-01-01",
            ...
          }
        ]
      }
    ]`;
};


/***/ }),

/***/ "./src/global/domain/guides/components/devtool/index.tsx":
/*!***************************************************************!*\
  !*** ./src/global/domain/guides/components/devtool/index.tsx ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GuideDevtool: () => (/* binding */ GuideDevtool)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js");
/* harmony import */ var _component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component */ "./src/global/domain/guides/components/devtool/component.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils */ "./src/global/domain/guides/utils/index.ts");
/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core */ "./src/global/domain/guides/core/index.ts");
/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index.scss */ "./src/global/domain/guides/components/devtool/index.scss");





class GuideDevtool {
  /** 初始化面板 */
  static init(data) {
    (0,_utils__WEBPACK_IMPORTED_MODULE_2__.addComponent)(document.body, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component__WEBPACK_IMPORTED_MODULE_1__.DevtoolComponent, { data, onPreview: (data2) => this.preview(data2) }));
  }
  /** 预览 */
  static preview(data) {
    _core__WEBPACK_IMPORTED_MODULE_3__.GuideRender.guideMap.forEach((guides) => {
      guides.forEach((guide) => {
        guide.clear();
      });
    });
    _core__WEBPACK_IMPORTED_MODULE_3__.GuideRender.guideMap.clear();
    _core__WEBPACK_IMPORTED_MODULE_3__.GuideRender.cachedMap.clear();
    _core__WEBPACK_IMPORTED_MODULE_3__.GuideRender.register(data);
    _core__WEBPACK_IMPORTED_MODULE_3__.GuideRender.flush("", (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getPathIdentifier)());
    _core__WEBPACK_IMPORTED_MODULE_3__.GuideRender.observer.trigger();
  }
}


/***/ }),

/***/ "./src/global/domain/guides/components/hints/component.tsx":
/*!*****************************************************************!*\
  !*** ./src/global/domain/guides/components/hints/component.tsx ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HintComponent: () => (/* binding */ HintComponent)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js");
/* harmony import */ var _option__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./option */ "./src/global/domain/guides/components/hints/option.ts");


const HintComponent = (props) => {
  const ref = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const { text = "New", destroyHook, listeners, style, placement, hidden = _option__WEBPACK_IMPORTED_MODULE_1__.HintHidden.Clicked } = props;
  const { onClick, onShow, onHide } = listeners;
  const destroy = () => {
    var _a;
    (_a = ref.current) == null ? void 0 : _a.remove();
  };
  const handleClick = () => {
    onHide == null ? void 0 : onHide();
    onClick == null ? void 0 : onClick();
    destroy();
  };
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    var _a;
    onShow == null ? void 0 : onShow();
    destroyHook == null ? void 0 : destroyHook.use(destroy);
    if (hidden === _option__WEBPACK_IMPORTED_MODULE_1__.HintHidden.Clicked) {
      const parentElement = (_a = ref.current) == null ? void 0 : _a.parentElement;
      parentElement == null ? void 0 : parentElement.addEventListener("click", handleClick, { once: true });
      return () => {
        parentElement == null ? void 0 : parentElement.removeEventListener("click", handleClick);
      };
    }
  }, []);
  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(
    "span",
    {
      className: `guide-hint guide-hint-placement-${placement || _option__WEBPACK_IMPORTED_MODULE_1__.HintPlacement.Right}`,
      style,
      onClick: hidden === _option__WEBPACK_IMPORTED_MODULE_1__.HintHidden.Clicked ? onClick : () => {
      },
      ref
    },
    text || "New"
  );
};


/***/ }),

/***/ "./src/global/domain/guides/components/hints/index.tsx":
/*!*************************************************************!*\
  !*** ./src/global/domain/guides/components/hints/index.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HintGuide: () => (/* binding */ HintGuide)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js");
/* harmony import */ var _component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component */ "./src/global/domain/guides/components/hints/component.tsx");
/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../base */ "./src/global/domain/guides/components/base.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils */ "./src/global/domain/guides/utils/index.ts");
/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core */ "./src/global/domain/guides/core/index.ts");
/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index.scss */ "./src/global/domain/guides/components/hints/index.scss");
var __defProp = Object.defineProperty;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};






class HintGuide extends _base__WEBPACK_IMPORTED_MODULE_2__.BaseGuide {
  constructor(rawOption) {
    super(rawOption);
    this.option = this.extendsOption({
      onShow: () => {
        _core__WEBPACK_IMPORTED_MODULE_4__.GuideRender.logger.tapShow(this.option.logParams);
      },
      onHide: () => {
        this.setOutdate();
        _core__WEBPACK_IMPORTED_MODULE_4__.GuideRender.logger.tapButtonClick(this.option.logParams);
      }
    });
    this.observerSelectors = this.option.selectors;
  }
  render() {
    this.guardRender(() => {
      (0,_utils__WEBPACK_IMPORTED_MODULE_3__.addComponent)(this.option.selectors.targetSelector, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component__WEBPACK_IMPORTED_MODULE_1__.HintComponent, __spreadValues({}, this.option)), {
        targetStyle: {
          position: "relative"
        },
        overrideTargetStyle: false
      });
      _core__WEBPACK_IMPORTED_MODULE_4__.GuideRender.observer.disconnect(this.option.id);
    });
  }
}


/***/ }),

/***/ "./src/global/domain/guides/components/hints/option.ts":
/*!*************************************************************!*\
  !*** ./src/global/domain/guides/components/hints/option.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HintHidden: () => (/* binding */ HintHidden),
/* harmony export */   HintPlacement: () => (/* binding */ HintPlacement)
/* harmony export */ });
var HintPlacement = /* @__PURE__ */ ((HintPlacement2) => {
  HintPlacement2["Right"] = "right";
  HintPlacement2["RightTop"] = "rightTop";
  return HintPlacement2;
})(HintPlacement || {});
var HintHidden = /* @__PURE__ */ ((HintHidden2) => {
  HintHidden2["Clicked"] = "clicked";
  HintHidden2["Outdated"] = "outdated";
  return HintHidden2;
})(HintHidden || {});


/***/ }),

/***/ "./src/global/domain/guides/components/index.tsx":
/*!*******************************************************!*\
  !*** ./src/global/domain/guides/components/index.tsx ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BaseGuide: () => (/* reexport safe */ _base__WEBPACK_IMPORTED_MODULE_0__.BaseGuide),
/* harmony export */   DestroyHook: () => (/* reexport safe */ _base__WEBPACK_IMPORTED_MODULE_0__.DestroyHook),
/* harmony export */   GuideComponentType: () => (/* reexport safe */ _data__WEBPACK_IMPORTED_MODULE_1__.GuideComponentType),
/* harmony export */   GuideDevtool: () => (/* reexport safe */ _devtool__WEBPACK_IMPORTED_MODULE_9__.GuideDevtool),
/* harmony export */   HintGuide: () => (/* reexport safe */ _hints__WEBPACK_IMPORTED_MODULE_3__.HintGuide),
/* harmony export */   HintHidden: () => (/* reexport safe */ _hints_option__WEBPACK_IMPORTED_MODULE_4__.HintHidden),
/* harmony export */   HintPlacement: () => (/* reexport safe */ _hints_option__WEBPACK_IMPORTED_MODULE_4__.HintPlacement),
/* harmony export */   PopoverGuide: () => (/* reexport safe */ _popovers__WEBPACK_IMPORTED_MODULE_5__.PopoverGuide),
/* harmony export */   PopoverTrigger: () => (/* reexport safe */ _popovers_option__WEBPACK_IMPORTED_MODULE_6__.PopoverTrigger),
/* harmony export */   TourGuide: () => (/* reexport safe */ _tours__WEBPACK_IMPORTED_MODULE_7__.TourGuide),
/* harmony export */   UserType: () => (/* reexport safe */ _types__WEBPACK_IMPORTED_MODULE_2__.UserType),
/* harmony export */   getExternalInfo: () => (/* reexport safe */ _base__WEBPACK_IMPORTED_MODULE_0__.getExternalInfo),
/* harmony export */   guideComponentMap: () => (/* reexport safe */ _data__WEBPACK_IMPORTED_MODULE_1__.guideComponentMap)
/* harmony export */ });
/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base */ "./src/global/domain/guides/components/base.ts");
/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data */ "./src/global/domain/guides/components/data.ts");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./types */ "./src/global/domain/guides/components/types.ts");
/* harmony import */ var _hints__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./hints */ "./src/global/domain/guides/components/hints/index.tsx");
/* harmony import */ var _hints_option__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./hints/option */ "./src/global/domain/guides/components/hints/option.ts");
/* harmony import */ var _popovers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./popovers */ "./src/global/domain/guides/components/popovers/index.tsx");
/* harmony import */ var _popovers_option__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./popovers/option */ "./src/global/domain/guides/components/popovers/option.ts");
/* harmony import */ var _tours__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./tours */ "./src/global/domain/guides/components/tours/index.tsx");
/* harmony import */ var _tours_option__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tours/option */ "./src/global/domain/guides/components/tours/option.ts");
/* harmony import */ var _tours_option__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_tours_option__WEBPACK_IMPORTED_MODULE_8__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _tours_option__WEBPACK_IMPORTED_MODULE_8__) if(["default","BaseGuide","DestroyHook","getExternalInfo","GuideComponentType","guideComponentMap","UserType","HintGuide","HintHidden","HintPlacement","PopoverGuide","PopoverTrigger","TourGuide"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _tours_option__WEBPACK_IMPORTED_MODULE_8__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
/* harmony import */ var _devtool__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./devtool */ "./src/global/domain/guides/components/devtool/index.tsx");












/***/ }),

/***/ "./src/global/domain/guides/components/popovers/component.tsx":
/*!********************************************************************!*\
  !*** ./src/global/domain/guides/components/popovers/component.tsx ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PopoverComponent: () => (/* binding */ PopoverComponent)
/* harmony export */ });
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd */ "./node_modules/.pnpm/registry.npmmirror.com+antd@5.1.2_wrrjcync2b7uri2ifzubktew2m/node_modules/antd/es/popover/index.js");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! antd */ "./node_modules/.pnpm/registry.npmmirror.com+antd@5.1.2_wrrjcync2b7uri2ifzubktew2m/node_modules/antd/es/button/index.js");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! antd */ "./node_modules/.pnpm/registry.npmmirror.com+antd@5.1.2_wrrjcync2b7uri2ifzubktew2m/node_modules/antd/es/badge/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js");
/* harmony import */ var _option__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./option */ "./src/global/domain/guides/components/popovers/option.ts");
/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../base */ "./src/global/domain/guides/components/base.ts");
/* harmony import */ var _data_images__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../data/images */ "./src/global/domain/guides/data/images.ts");
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));





const PopoverComponent = (props) => {
  const { style, listeners, selectors, content, destroyHook, trigger = _option__WEBPACK_IMPORTED_MODULE_1__.PopoverTrigger.None } = props;
  const { popupContainerSelector } = selectors;
  const { onShow, onHide, onClickOk, onClickLink } = listeners;
  const { title, desc, okText = "\u77E5\u9053\u4E86", preview, external } = content;
  const { zIndex = 0, align, placement = "top", dotStyle = {}, theme = "default" } = style || {};
  const externalInfo = (0,_base__WEBPACK_IMPORTED_MODULE_2__.getExternalInfo)(external);
  const isHoverTrigger = trigger === _option__WEBPACK_IMPORTED_MODULE_1__.PopoverTrigger.Hover;
  const [visible, setVisible] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);
  const innerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const visibleProps = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(() => {
    if (isHoverTrigger && visible) {
      return { trigger: "hover" };
    } else {
      return { visible };
    }
  }, [visible, isHoverTrigger]);
  const getPopupContainer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(() => {
    const container = popupContainerSelector ? document.querySelector(popupContainerSelector) : null;
    return container || document.body;
  }, []);
  const handleClickOK = () => {
    onClickOk == null ? void 0 : onClickOk();
    destroy();
  };
  const handleClickLink = () => {
    onClickLink == null ? void 0 : onClickLink(externalInfo);
    window.open(externalInfo == null ? void 0 : externalInfo.url);
  };
  const destroy = () => {
    var _a;
    setVisible(false);
    onHide == null ? void 0 : onHide();
    (_a = innerRef.current) == null ? void 0 : _a.remove();
  };
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    onShow == null ? void 0 : onShow();
    destroyHook == null ? void 0 : destroyHook.use(destroy);
  }, []);
  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(
    antd__WEBPACK_IMPORTED_MODULE_4__["default"],
    __spreadProps(__spreadValues({}, visibleProps), {
      overlayClassName: `guide-popover is-theme-${theme}`,
      destroyTooltipOnHide: { keepParent: false },
      getPopupContainer: () => getPopupContainer(),
      placement,
      zIndex,
      content: /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-popover-wrapper" }, preview && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-popover-image" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(
        "img",
        {
          src: preview.imgUrl.startsWith("http") ? preview.imgUrl : _data_images__WEBPACK_IMPORTED_MODULE_3__["default"][preview.imgUrl],
          width: preview.width || "100%",
          height: preview.height || "auto",
          alt: "preview"
        }
      )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-popover-title" }, title), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-popover-desc", dangerouslySetInnerHTML: { __html: desc } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-popover-footer" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", { className: "guide-popover-external" }, Boolean(externalInfo) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", { onClick: handleClickLink }, externalInfo == null ? void 0 : externalInfo.text)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(
        antd__WEBPACK_IMPORTED_MODULE_5__["default"],
        {
          className: "guide-popover-button",
          onClick: (e) => {
            e.preventDefault();
            handleClickOK();
          }
        },
        okText
      )))
    }),
    isHoverTrigger ? /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(
      "span",
      {
        ref: innerRef,
        className: `guide-popover-attach-node is-trigger-hover is-theme-${theme}`,
        style: dotStyle
      },
      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(antd__WEBPACK_IMPORTED_MODULE_6__["default"], { status: "processing" })
    ) : /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", { ref: innerRef, className: `guide-popover-attach-node is-theme-${theme}` })
  );
};


/***/ }),

/***/ "./src/global/domain/guides/components/popovers/index.tsx":
/*!****************************************************************!*\
  !*** ./src/global/domain/guides/components/popovers/index.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PopoverGuide: () => (/* binding */ PopoverGuide)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js");
/* harmony import */ var _component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./component */ "./src/global/domain/guides/components/popovers/component.tsx");
/* harmony import */ var _option__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./option */ "./src/global/domain/guides/components/popovers/option.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils */ "./src/global/domain/guides/utils/index.ts");
/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../base */ "./src/global/domain/guides/components/base.ts");
/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core */ "./src/global/domain/guides/core/index.ts");
/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./index.scss */ "./src/global/domain/guides/components/popovers/index.scss");
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));







class PopoverGuide extends _base__WEBPACK_IMPORTED_MODULE_4__.BaseGuide {
  constructor(rawOption) {
    super(rawOption);
    this.option = this.extendsOption({
      onShow: () => {
        _core__WEBPACK_IMPORTED_MODULE_5__.GuideRender.logger.tapShow(this.option.logParams);
      },
      onClickLink: (linkInfo) => {
        _core__WEBPACK_IMPORTED_MODULE_5__.GuideRender.logger.tapLinkClick(__spreadProps(__spreadValues({}, this.option.logParams), {
          button_for: linkInfo.text
        }));
      },
      onClickOk: () => {
        this.setOutdate();
        _core__WEBPACK_IMPORTED_MODULE_5__.GuideRender.observer.disconnect(this.option.id, true);
        _core__WEBPACK_IMPORTED_MODULE_5__.GuideRender.logger.tapButtonClick(this.option.logParams);
      }
    });
    this.option.runWithNoPriority = Boolean(this.option.trigger === _option__WEBPACK_IMPORTED_MODULE_2__.PopoverTrigger.Hover);
    this.observerSelectors = this.option.selectors;
  }
  render() {
    this.guardRender(() => {
      (0,_utils__WEBPACK_IMPORTED_MODULE_3__.addComponent)(this.option.selectors.targetSelector, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component__WEBPACK_IMPORTED_MODULE_1__.PopoverComponent, __spreadValues({}, this.option)), {
        targetStyle: {
          position: "relative"
        },
        overrideTargetStyle: false
      });
    });
  }
}


/***/ }),

/***/ "./src/global/domain/guides/components/popovers/option.ts":
/*!****************************************************************!*\
  !*** ./src/global/domain/guides/components/popovers/option.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PopoverTrigger: () => (/* binding */ PopoverTrigger)
/* harmony export */ });
var PopoverTrigger = /* @__PURE__ */ ((PopoverTrigger2) => {
  PopoverTrigger2["None"] = "none";
  PopoverTrigger2["Hover"] = "hover";
  return PopoverTrigger2;
})(PopoverTrigger || {});


/***/ }),

/***/ "./src/global/domain/guides/components/tours/component.tsx":
/*!*****************************************************************!*\
  !*** ./src/global/domain/guides/components/tours/component.tsx ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TourComponent: () => (/* binding */ TourComponent)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils */ "./src/global/domain/guides/utils/index.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash */ "./node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/debounce.js");
/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../base */ "./src/global/domain/guides/components/base.ts");
/* harmony import */ var _data_images__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../data/images */ "./src/global/domain/guides/data/images.ts");
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));






const TourComponent = (props) => {
  const {
    steps: rawSteps,
    backText = "\u4E0A\u4E00\u6B65",
    nextText = "\u4E0B\u4E00\u6B65",
    finishText = "\u5B8C\u6210",
    okText = "\u77E5\u9053\u4E86",
    external,
    destroyHook,
    listeners,
    bodyOverflow = "hidden",
    tourWrapperStyle = {},
    connectWrapperStyle,
    contentWrapperStyle = {}
  } = props;
  const { zIndex } = __spreadValues({ zIndex: 999e3 }, tourWrapperStyle || {});
  const { width: contentWidth } = __spreadValues({ width: 384 }, contentWrapperStyle || {});
  const { onShow, onHide, onStepChange } = listeners;
  const externalInfo = (0,_base__WEBPACK_IMPORTED_MODULE_3__.getExternalInfo)(external);
  const steps = rawSteps.map((it) => {
    it.targetDOM = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.querySelector)(it.targetSelector);
    return it;
  });
  const maskRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const wrapperRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const contentRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);
  const bodyOverflowRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(document.body.style.overflow);
  const [wrapperStyle, setWrapperStyle] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({ opacity: 0 });
  const [contentAlign, setAlign] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();
  const [stepIndex, setStepIndex] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);
  const activeStep = steps[stepIndex];
  const destroy = () => {
    var _a, _b;
    scrollHandler.unlock();
    (_a = maskRef.current) == null ? void 0 : _a.remove();
    (_b = wrapperRef.current) == null ? void 0 : _b.remove();
    window.removeEventListener("resize", resizeStyle);
    onHide == null ? void 0 : onHide(stepIndex, steps.length);
  };
  const scrollHandler = {
    lock() {
      document.body.style.overflow = bodyOverflow;
    },
    unlock() {
      document.body.style.overflow = bodyOverflowRef.current;
    }
  };
  const handleStep = (delta) => {
    let newStep = stepIndex + delta;
    if (newStep > steps.length - 1) {
      destroy();
    } else {
      newStep = Math.min(steps.length - 1, newStep);
      newStep = Math.max(0, newStep);
      setStepIndex(newStep);
    }
    onStepChange == null ? void 0 : onStepChange(newStep, stepIndex, steps.length);
  };
  const resizeStyle = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(
    (0,lodash__WEBPACK_IMPORTED_MODULE_5__["default"])(() => {
      var _a;
      if (!activeStep)
        return;
      const { targetDOM } = activeStep;
      if (targetDOM) {
        const { left, top, width, height } = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getOffset)(targetDOM);
        const offset = 16;
        setWrapperStyle({
          opacity: 1,
          left: left - offset,
          top: top - offset,
          width: width + offset * 2,
          height: height + offset * 2,
          padding: 4
        });
        const alignClass = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getPlacement)(activeStep.alignType, {
          left,
          width,
          contentWidth: parseInt(`${contentWidth}`, 10),
          containerWidth: window.innerWidth,
          top,
          height,
          contentHeight: ((_a = contentRef.current) == null ? void 0 : _a.offsetHeight) || 168,
          containerHeight: window.innerHeight
        });
        setAlign(alignClass);
        scrollHandler.lock();
      }
    }, 50),
    [activeStep]
  );
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    destroyHook == null ? void 0 : destroyHook.use(destroy);
    resizeStyle();
    onShow == null ? void 0 : onShow(stepIndex, steps.length);
    window.addEventListener("resize", resizeStyle);
    return () => {
      window.removeEventListener("resize", resizeStyle);
    };
  }, [activeStep]);
  return /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { ref: maskRef, className: "guide-tour-outer-mask", style: { zIndex } }), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(
    "div",
    {
      ref: wrapperRef,
      className: classnames__WEBPACK_IMPORTED_MODULE_1___default()(`guide-tour-wrapper`, `guide-tour-${activeStep.alignType || "bottom"}`),
      style: __spreadProps(__spreadValues(__spreadValues({}, wrapperStyle), tourWrapperStyle), { zIndex: parseInt(zIndex, 10) + 1 })
    },
    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-inner-mask" }),
    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-active-wrapper" }),
    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-connect-wrapper", style: connectWrapperStyle }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-round-outer" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-round-inner" })), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-connect-bar" })),
    /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(
      "div",
      {
        ref: contentRef,
        className: classnames__WEBPACK_IMPORTED_MODULE_1___default()(`guide-tour-content-wrapper`, `guide-tour-${contentAlign}`),
        style: __spreadValues({ width: 384 }, contentWrapperStyle)
      },
      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-content" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: `guide-tour-step guide-tour-step__${activeStep.previewAlign || "horizontal"}` }, activeStep.preview && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-step__preview" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(
        "img",
        {
          src: activeStep.preview.imgUrl.startsWith("http") ? activeStep.preview.imgUrl : _data_images__WEBPACK_IMPORTED_MODULE_4__["default"][activeStep.preview.imgUrl],
          width: activeStep.preview.width || "100%",
          height: activeStep.preview.height || "auto",
          alt: "activeStep"
        }
      )), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-step__content" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-step__title" }, activeStep.title), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-step__desc" }, activeStep.content)))),
      /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-actions" }, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-actions-extra" }, Boolean(externalInfo) && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("span", { onClick: () => window.open(externalInfo == null ? void 0 : externalInfo.url) }, externalInfo.text)), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("div", { className: "guide-tour-actions-buttons" }, stepIndex > 0 && /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", { className: "ant-btn ant-btn-dashed", onClick: () => handleStep(-1) }, backText), /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement("button", { className: "ant-btn ant-btn-primary", onClick: () => handleStep(1) }, stepIndex === steps.length - 1 ? stepIndex > 0 ? finishText : okText : nextText)))
    )
  ));
};


/***/ }),

/***/ "./src/global/domain/guides/components/tours/index.tsx":
/*!*************************************************************!*\
  !*** ./src/global/domain/guides/components/tours/index.tsx ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TourGuide: () => (/* binding */ TourGuide)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js");
/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../base */ "./src/global/domain/guides/components/base.ts");
/* harmony import */ var _component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./component */ "./src/global/domain/guides/components/tours/component.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils */ "./src/global/domain/guides/utils/index.ts");
/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core */ "./src/global/domain/guides/core/index.ts");
/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./index.scss */ "./src/global/domain/guides/components/tours/index.scss");
var __defProp = Object.defineProperty;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};






class TourGuide extends _base__WEBPACK_IMPORTED_MODULE_1__.BaseGuide {
  constructor(rawOption) {
    super(rawOption);
    this.option = this.extendsOption({
      onShow: () => {
        _core__WEBPACK_IMPORTED_MODULE_4__.GuideRender.logger.tapShow(this.option.logParams);
      },
      onHide: () => {
        this.setOutdate();
        _core__WEBPACK_IMPORTED_MODULE_4__.GuideRender.observer.disconnect(this.option.id, true);
        _core__WEBPACK_IMPORTED_MODULE_4__.GuideRender.logger.tapButtonClick(this.option.logParams);
      }
    });
    this.observerSelectors = {
      targetSelector: this.option.steps.map((it) => it.targetSelector)
    };
  }
  render() {
    this.guardRender(() => {
      (0,_utils__WEBPACK_IMPORTED_MODULE_3__.addComponent)(document.body, /* @__PURE__ */ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component__WEBPACK_IMPORTED_MODULE_2__.TourComponent, __spreadValues({}, this.option)));
    });
  }
}


/***/ }),

/***/ "./src/global/domain/guides/components/tours/option.ts":
/*!*************************************************************!*\
  !*** ./src/global/domain/guides/components/tours/option.ts ***!
  \*************************************************************/
/***/ (() => {



/***/ }),

/***/ "./src/global/domain/guides/components/types.ts":
/*!******************************************************!*\
  !*** ./src/global/domain/guides/components/types.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UserType: () => (/* binding */ UserType)
/* harmony export */ });
var UserType = /* @__PURE__ */ ((UserType2) => {
  UserType2[UserType2["INTERNAL_BUSINESS"] = 11] = "INTERNAL_BUSINESS";
  UserType2[UserType2["ECOM_PLATFORM"] = 21] = "ECOM_PLATFORM";
  UserType2[UserType2["BRAND_MERCHANTS"] = 22] = "BRAND_MERCHANTS";
  UserType2[UserType2["INSTITUTIONAL_SERVICE_PROVIDERS"] = 23] = "INSTITUTIONAL_SERVICE_PROVIDERS";
  UserType2[UserType2["DAREN"] = 24] = "DAREN";
  return UserType2;
})(UserType || {});


/***/ }),

/***/ "./src/global/domain/guides/core/index.ts":
/*!************************************************!*\
  !*** ./src/global/domain/guides/core/index.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GuideRender: () => (/* binding */ GuideRender)
/* harmony export */ });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ "./node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/cloneDeep.js");
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components */ "./src/global/domain/guides/components/index.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ "./src/global/domain/guides/utils/index.ts");
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));



const _GuideRender = class {
  /**
   * 校验引导配置
   */
  static validate(option, userInfo) {
    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_1__.isUserAccessible)(option.userType || [], userInfo))
      return;
    return true;
  }
  /**
   * 注册引导实例
   */
  static register(data) {
    (0,lodash__WEBPACK_IMPORTED_MODULE_2__["default"])(data).forEach((item) => {
      const { pathname, instances } = item;
      const guideList = this.guideMap.get(pathname || _utils__WEBPACK_IMPORTED_MODULE_1__.UNKNOWN_PATHNAME) || [];
      instances.forEach((ins) => {
        const valid = this.validate(ins, this.userInfo);
        if (valid) {
          const compo = _components__WEBPACK_IMPORTED_MODULE_0__.guideComponentMap.get(ins.type);
          if (compo) {
            const [GuideComponent, builtinPriority] = compo;
            const priority = [builtinPriority, Array.isArray(ins.priority) ? ins.priority[0] || 0 : ins.priority || 0];
            const logParams = Object.assign({}, { guide_trace_id: ins.id, guide_type: ins.type }, ins.logParams);
            const option = __spreadProps(__spreadValues({}, ins), { pathname, priority, logParams });
            guideList.push(new GuideComponent(option));
          }
        }
      });
      this.guideMap.set(pathname || _utils__WEBPACK_IMPORTED_MODULE_1__.UNKNOWN_PATHNAME, guideList);
    });
  }
  /**
   * 初始化
   */
  static init(data, userInfo, devMode) {
    const node = document.body;
    this.devMode = Boolean(devMode);
    this.userInfo = userInfo;
    this.observer = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.createDOMObserver)(node, this.scheduleTask.bind(this));
    this.logger = new _utils__WEBPACK_IMPORTED_MODULE_1__.GuideLogger(userInfo);
    this.cachedMap = _utils__WEBPACK_IMPORTED_MODULE_1__.CacheService.init(data, devMode);
    this.register(data);
  }
  /**
   * 重新打开引导
   */
  static reopen(ids) {
    this.guideMap.forEach((guides) => {
      guides.forEach((guide) => {
        if (ids.includes(guide.option.id)) {
          guide.option.isOutdated = false;
          guide.option.isMounted = false;
        }
      });
    });
    _GuideRender.flush("", (0,_utils__WEBPACK_IMPORTED_MODULE_1__.getPathIdentifier)());
    _GuideRender.observer.trigger();
    _utils__WEBPACK_IMPORTED_MODULE_1__.CacheService.remove(ids);
  }
  /**
   * 刷新引导任务队列
   */
  static flush(prevPathname, currPathname) {
    const oldInstances = this.guideMap.get(prevPathname);
    const newInstances = this.guideMap.get(currPathname);
    const unknownInstances = this.guideMap.get(_utils__WEBPACK_IMPORTED_MODULE_1__.UNKNOWN_PATHNAME);
    this.observer.clear();
    oldInstances == null ? void 0 : oldInstances.forEach((guide) => guide.clear());
    newInstances == null ? void 0 : newInstances.forEach((guide) => guide.start());
    unknownInstances == null ? void 0 : unknownInstances.forEach((guide) => guide.start());
  }
  /**
   * 调度渲染任务
   */
  static scheduleTask(node, guideMap) {
    if (!guideMap.size)
      return;
    const taskQueue = Array.from(guideMap.values());
    taskQueue.sort((a, b) => parseInt(b.priority.join("")) - parseInt(a.priority.join("")));
    const refTask = taskQueue[0];
    const filteredTaskQueue = refTask ? taskQueue.filter(
      (it) => it.runWithNoPriority || it.priority[0] === refTask.priority[0] && it.priority[1] === refTask.priority[1]
    ) : [];
    filteredTaskQueue.forEach((item) => {
      const { selectors, render, clear } = item;
      const active = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.querySelectors)(selectors, node);
      active ? render() : clear();
    });
  }
  /**
   * 销毁
   */
  static destroy() {
    var _a;
    (_a = this.observer) == null ? void 0 : _a.destroy();
  }
  /**
   * 更新本地缓存
   */
  static updateCache() {
    const cachedData = [];
    this.guideMap.forEach((guides) => {
      guides.forEach((guide) => {
        const oldCache = this.cachedMap.get(guide.option.id);
        const newCache = { id: guide.option.id, outdateTime: guide.option.outdateTime };
        if (oldCache) {
          newCache.outdateTime = _utils__WEBPACK_IMPORTED_MODULE_1__.CacheService.getOutdateTime(newCache.outdateTime, oldCache.outdateTime);
        }
        cachedData.push(newCache);
        this.cachedMap.set(guide.option.id, newCache);
      });
    });
    _utils__WEBPACK_IMPORTED_MODULE_1__.CacheService.set("guides", "", cachedData);
  }
};
let GuideRender = _GuideRender;
/**
 * 本地缓存的引导信息
 */
GuideRender.cachedMap = /* @__PURE__ */ new Map();
/**
 * 记录运行时注册的引导实例，按 pathname 分组
 */
GuideRender.guideMap = /* @__PURE__ */ new Map([[_utils__WEBPACK_IMPORTED_MODULE_1__.UNKNOWN_PATHNAME, []]]);


/***/ }),

/***/ "./src/global/domain/guides/data/images.ts":
/*!*************************************************!*\
  !*** ./src/global/domain/guides/data/images.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  IntelligentRedpackGuideBg: "",
  ConbinationBuyGuide: "",
  ShareToFanPreview: "",
  SuggestScriptGuide: "",
  VideoDiagnoseCommentGuide: "",
  EntrustManageGuide: "",
  ShopWindowGuide: ""
});


/***/ }),

/***/ "./src/global/domain/guides/data/index.ts":
/*!************************************************!*\
  !*** ./src/global/domain/guides/data/index.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _popovers_2024_12_29_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./popovers-2024-12-29.json */ "./src/global/domain/guides/data/popovers-2024-12-29.json");
/* harmony import */ var _popovers_2024_12_29_json__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_popovers_2024_12_29_json__WEBPACK_IMPORTED_MODULE_0__);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([
  (_popovers_2024_12_29_json__WEBPACK_IMPORTED_MODULE_0___default())
  // PopoversExpiredOn20231102,
  // PopoversExpiredOn20231111,
  // PopoversExpiredOn2023630,
  // PopoversExpiredOn20230531,
  // PopoversExpiredOn20230430,
  // PopoversExpiredOn20230423,
  // PopoversExpiredOn20230601,
  // PopoversExpiredOn20230622,
  // PopoversExpiredOn20230701,
  // PopoversExpiredOn20230430,
  // PopoversExpiredOn20240601,
]);


/***/ }),

/***/ "./src/global/domain/guides/index.tsx":
/*!********************************************!*\
  !*** ./src/global/domain/guides/index.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BuyinGuideSDK: () => (/* binding */ BuyinGuideSDK)
/* harmony export */ });
/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ "./src/global/domain/guides/core/index.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./src/global/domain/guides/utils/index.ts");
/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data */ "./src/global/domain/guides/data/index.ts");
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components */ "./src/global/domain/guides/components/index.tsx");
/* harmony import */ var _abTest__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../abTest */ "./src/global/domain/abTest.ts");
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};





class BuyinGuideSDK {
  /** 初始化配置化引导 */
  static init(userInfo, devtool) {
    (0,_utils__WEBPACK_IMPORTED_MODULE_1__.isPageLoaded)({ delay: 1e3 }).then(() => _data__WEBPACK_IMPORTED_MODULE_2__["default"].reduce((acc, curr) => acc.concat(curr), [])).then((data) => this.filterABTest(data)).then((data) => {
      _core__WEBPACK_IMPORTED_MODULE_0__.GuideRender.init(data, userInfo, devtool);
      this.unwatch = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.watchRouteChange)((prev, curr) => _core__WEBPACK_IMPORTED_MODULE_0__.GuideRender.flush(prev, curr));
      if (devtool) {
        _components__WEBPACK_IMPORTED_MODULE_3__.GuideDevtool.init(data);
      }
    }).catch((err) => {
      console.error("\u5F15\u5BFC\u521D\u59CB\u5316\u5931\u8D25: ", err);
    });
  }
  /** 重新打开引导 */
  static reopen(ids) {
    _core__WEBPACK_IMPORTED_MODULE_0__.GuideRender.reopen(ids);
  }
  /** 检查 AB 试验配置 */
  static filterABTest(data) {
    return __async(this, null, function* () {
      return yield (0,_utils__WEBPACK_IMPORTED_MODULE_1__.filterInstances)(data, (ins) => __async(this, null, function* () {
        if (ins.abTest) {
          try {
            const { key, defaultValue = false, activeValue = true } = ins.abTest;
            const result = yield (0,_abTest__WEBPACK_IMPORTED_MODULE_4__.getABTestConfig)(key, defaultValue);
            return result === activeValue;
          } catch (e) {
            return false;
          }
        } else {
          return true;
        }
      }));
    });
  }
  /** 缓存统一管理工具 - 设置缓存 */
  static setCache(key, data) {
    _utils__WEBPACK_IMPORTED_MODULE_1__.CacheService.set("extra", key, data);
  }
  /** 缓存统一管理工具 - 读取缓存 */
  static getCache(key) {
    return _utils__WEBPACK_IMPORTED_MODULE_1__.CacheService.get("extra", key);
  }
  /** 销毁配置化引导 */
  static destroy() {
    this.unwatch();
    _core__WEBPACK_IMPORTED_MODULE_0__.GuideRender.destroy();
  }
}
// eslint-disable-next-line @typescript-eslint/no-empty-function
BuyinGuideSDK.unwatch = () => {
};


/***/ }),

/***/ "./src/global/domain/guides/utils/cache.ts":
/*!*************************************************!*\
  !*** ./src/global/domain/guides/utils/cache.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CacheService: () => (/* binding */ CacheService),
/* harmony export */   GuideCacheKey: () => (/* binding */ GuideCacheKey),
/* harmony export */   GuideDevCacheKey: () => (/* binding */ GuideDevCacheKey),
/* harmony export */   JSONParse: () => (/* binding */ JSONParse),
/* harmony export */   getBaseCacheMap: () => (/* binding */ getBaseCacheMap)
/* harmony export */ });
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
const GuideCacheKey = "guide-cache-key-xxxxx-00000";
const GuideDevCacheKey = "guide-dev-cache-key-xxxxx-00000";
class CacheService {
  static get defaultOutdateTime() {
    return Date.now() + 14 * 24 * 60 * 6e4;
  }
  static getOutdateTime(presetTime, cacheTime) {
    const _cacheTime = Number(cacheTime);
    if (presetTime) {
      presetTime = new Date(presetTime).getTime();
      return _cacheTime && _cacheTime < presetTime ? _cacheTime : presetTime;
    } else {
      return _cacheTime || this.defaultOutdateTime;
    }
  }
  static isOutdated(outdateTime) {
    return outdateTime ? new Date(outdateTime).getTime() <= Date.now() : false;
  }
  static init(data, devMode) {
    var _a;
    this.cacheKey = devMode ? GuideDevCacheKey : GuideCacheKey;
    this.cacheInfo = this._get(this.cacheKey) || this.cacheInfo;
    const baseCacheMap = getBaseCacheMap(data);
    const retCacheMap = /* @__PURE__ */ new Map();
    const localCacheMap = /* @__PURE__ */ new Map();
    (_a = this.cacheInfo.guides) == null ? void 0 : _a.forEach((it) => {
      localCacheMap.set(it.id, it);
    });
    this.cacheInfo.guides = [];
    baseCacheMap == null ? void 0 : baseCacheMap.forEach((cache, id) => {
      const localItem = localCacheMap.get(id);
      const currItem = __spreadProps(__spreadValues({}, cache), {
        outdateTime: this.getOutdateTime(cache.outdateTime, localItem == null ? void 0 : localItem.outdateTime)
      });
      retCacheMap.set(id, currItem);
      this.cacheInfo.guides.push(currItem);
    });
    this._set(this.cacheInfo);
    return retCacheMap;
  }
  static remove(ids = []) {
    this.cacheInfo.guides = this.cacheInfo.guides.filter((it) => !ids.includes(it.id));
    this._set(this.cacheInfo);
  }
  static set(baseKey, cacheKey, cacheData) {
    switch (baseKey) {
      case "guides":
        const newCacheData = this.cacheInfo.guides.concat(cacheData);
        this.cacheInfo.guides = this.dedupeGuideCache(newCacheData);
        break;
      case "devtool":
        this.cacheInfo.devtool[cacheKey] = cacheData;
        break;
      case "extra":
      default:
        this.cacheInfo.extra[cacheKey] = cacheData;
        break;
    }
    this._set(this.cacheInfo);
  }
  static get(baseKey, key) {
    switch (baseKey) {
      case "guides":
        return this.cacheInfo.guides;
      case "devtool":
        return this.cacheInfo.devtool[key];
      case "extra":
      default:
        return this.cacheInfo.extra[key];
    }
  }
  static _set(data) {
    localStorage.setItem(this.cacheKey, JSON.stringify(data));
  }
  static _get(key) {
    const cache = localStorage.getItem(key);
    return cache ? JSONParse(cache) : null;
  }
  static dedupeGuideCache(data) {
    const map = /* @__PURE__ */ new Map([]);
    data == null ? void 0 : data.forEach((it) => {
      map.set(it.id, it);
    });
    return Array.from(map.values());
  }
}
CacheService.cacheInfo = { guides: [], devtool: {}, extra: {} };
CacheService.cacheKey = GuideCacheKey;
const JSONParse = (content) => {
  try {
    return content ? JSON.parse(content) : null;
  } catch (error) {
    return null;
  }
};
const getBaseCacheMap = (data) => {
  const cacheMap = /* @__PURE__ */ new Map();
  for (const group of data) {
    for (const ins of group.instances) {
      cacheMap.set(ins.id, {
        id: ins.id,
        outdateTime: ins.outdateTime || CacheService.defaultOutdateTime
      });
    }
  }
  return cacheMap;
};


/***/ }),

/***/ "./src/global/domain/guides/utils/dom.tsx":
/*!************************************************!*\
  !*** ./src/global/domain/guides/utils/dom.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addComponent: () => (/* binding */ addComponent),
/* harmony export */   addStyle: () => (/* binding */ addStyle),
/* harmony export */   getOffset: () => (/* binding */ getOffset),
/* harmony export */   getPlacement: () => (/* binding */ getPlacement)
/* harmony export */ });
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-dom */ "./node_modules/.pnpm/react-dom@16.14.0_react@16.14.0/node_modules/react-dom/index.js");
/* harmony import */ var _selector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./selector */ "./src/global/domain/guides/utils/selector.ts");


const addComponent = (elem, component, options) => {
  const selector = typeof elem === "string" ? elem : "";
  const target = selector ? (0,_selector__WEBPACK_IMPORTED_MODULE_1__.querySelector)(selector) : elem;
  if (!target) {
    console.error(`[addComponent] target not found: ${selector}`);
    return;
  }
  const container = document.createDocumentFragment();
  react_dom__WEBPACK_IMPORTED_MODULE_0__.render(component, container);
  addStyle(target, options == null ? void 0 : options.targetStyle, options == null ? void 0 : options.overrideTargetStyle);
  target.appendChild(container);
};
const addStyle = (elem, style, override = true) => {
  if (style) {
    Object.keys(style).forEach((key) => {
      elem.style[key] = (override ? "" : elem.style[key]) || style[key];
    });
  }
};
const getOffset = (element) => {
  const { body } = document;
  const docEl = document.documentElement;
  const scrollTop = window.pageYOffset || docEl.scrollTop || body.scrollTop;
  const scrollLeft = window.pageXOffset || docEl.scrollLeft || body.scrollLeft;
  const x = element.getBoundingClientRect();
  return {
    top: x.top + scrollTop,
    width: x.width,
    height: x.height,
    left: x.left + scrollLeft
  };
};
const getPlacement = (placement, {
  left,
  width,
  contentWidth,
  containerWidth,
  top,
  containerHeight
}) => {
  let alignClass;
  if (["top", "bottom"].includes(placement)) {
    if (width < contentWidth) {
      if (left < containerWidth / 2) {
        alignClass = "align-left";
      } else {
        alignClass = "align-right";
      }
    } else {
      alignClass = "align-auto";
    }
  } else if (top < containerHeight / 2) {
    alignClass = "align-top";
  } else {
    alignClass = "align-bottom";
  }
  return alignClass;
};


/***/ }),

/***/ "./src/global/domain/guides/utils/index.ts":
/*!*************************************************!*\
  !*** ./src/global/domain/guides/utils/index.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CacheService: () => (/* reexport safe */ _cache__WEBPACK_IMPORTED_MODULE_0__.CacheService),
/* harmony export */   GuideCacheKey: () => (/* reexport safe */ _cache__WEBPACK_IMPORTED_MODULE_0__.GuideCacheKey),
/* harmony export */   GuideDevCacheKey: () => (/* reexport safe */ _cache__WEBPACK_IMPORTED_MODULE_0__.GuideDevCacheKey),
/* harmony export */   GuideLogger: () => (/* reexport safe */ _log__WEBPACK_IMPORTED_MODULE_6__.GuideLogger),
/* harmony export */   JSONParse: () => (/* reexport safe */ _cache__WEBPACK_IMPORTED_MODULE_0__.JSONParse),
/* harmony export */   UNKNOWN_PATHNAME: () => (/* reexport safe */ _route__WEBPACK_IMPORTED_MODULE_3__.UNKNOWN_PATHNAME),
/* harmony export */   addComponent: () => (/* reexport safe */ _dom__WEBPACK_IMPORTED_MODULE_2__.addComponent),
/* harmony export */   addStyle: () => (/* reexport safe */ _dom__WEBPACK_IMPORTED_MODULE_2__.addStyle),
/* harmony export */   createDOMObserver: () => (/* reexport safe */ _observe__WEBPACK_IMPORTED_MODULE_4__.createDOMObserver),
/* harmony export */   filterInstances: () => (/* reexport safe */ _option__WEBPACK_IMPORTED_MODULE_7__.filterInstances),
/* harmony export */   getBaseCacheMap: () => (/* reexport safe */ _cache__WEBPACK_IMPORTED_MODULE_0__.getBaseCacheMap),
/* harmony export */   getOffset: () => (/* reexport safe */ _dom__WEBPACK_IMPORTED_MODULE_2__.getOffset),
/* harmony export */   getPathIdentifier: () => (/* reexport safe */ _route__WEBPACK_IMPORTED_MODULE_3__.getPathIdentifier),
/* harmony export */   getPlacement: () => (/* reexport safe */ _dom__WEBPACK_IMPORTED_MODULE_2__.getPlacement),
/* harmony export */   isPageLoaded: () => (/* reexport safe */ _route__WEBPACK_IMPORTED_MODULE_3__.isPageLoaded),
/* harmony export */   isUserAccessible: () => (/* reexport safe */ _user__WEBPACK_IMPORTED_MODULE_5__.isUserAccessible),
/* harmony export */   querySelector: () => (/* reexport safe */ _selector__WEBPACK_IMPORTED_MODULE_1__.querySelector),
/* harmony export */   querySelectors: () => (/* reexport safe */ _selector__WEBPACK_IMPORTED_MODULE_1__.querySelectors),
/* harmony export */   watchRouteChange: () => (/* reexport safe */ _route__WEBPACK_IMPORTED_MODULE_3__.watchRouteChange)
/* harmony export */ });
/* harmony import */ var _cache__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cache */ "./src/global/domain/guides/utils/cache.ts");
/* harmony import */ var _selector__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./selector */ "./src/global/domain/guides/utils/selector.ts");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dom */ "./src/global/domain/guides/utils/dom.tsx");
/* harmony import */ var _route__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./route */ "./src/global/domain/guides/utils/route.ts");
/* harmony import */ var _observe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./observe */ "./src/global/domain/guides/utils/observe.ts");
/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./user */ "./src/global/domain/guides/utils/user.ts");
/* harmony import */ var _log__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./log */ "./src/global/domain/guides/utils/log.ts");
/* harmony import */ var _option__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./option */ "./src/global/domain/guides/utils/option.ts");










/***/ }),

/***/ "./src/global/domain/guides/utils/log.ts":
/*!***********************************************!*\
  !*** ./src/global/domain/guides/utils/log.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GuideLogger: () => (/* binding */ GuideLogger)
/* harmony export */ });
/* harmony import */ var _global_domain_logger_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @global/domain/logger/base */ "./src/global/domain/logger/base.ts");
var __defProp = Object.defineProperty;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};

class GuideLogger extends _global_domain_logger_base__WEBPACK_IMPORTED_MODULE_0__.Log {
  constructor(userInfo) {
    super();
    this.userInfo = userInfo;
  }
  get commonParams() {
    const {
      user_id,
      origin_uid,
      author_level,
      is_real_one_shop,
      is_possess_login,
      shop_id,
      shop_type,
      buyin_account_id,
      shop_login_identity
    } = this.userInfo;
    return {
      EVENT_ORIGIN_FEATURE: "TEMAI",
      url: location.href,
      url_path: location.pathname,
      page_name: location.pathname,
      user_id,
      author_level,
      shop_type,
      user_level: author_level,
      // 作者等级
      author_id: shop_type === 24 ? origin_uid : "",
      // 达人 id
      shop_id: shop_type === 11 ? shop_id : "",
      // 小店商家 id
      inst_id: shop_type === 23 ? buyin_account_id : "",
      // 机构 id
      is_bind: is_real_one_shop ? 1 : 0,
      // 是否人店一体
      bind_status: is_real_one_shop ? 1 : 0,
      // 是否人店一体
      is_fake: Number(is_possess_login) === 1,
      // 是否运营附身,
      shop_login_identity
      // 商家账号主子账号
    };
  }
  tapShow(params) {
    this.send("guide_show_event", __spreadValues(__spreadValues({}, this.commonParams), params));
  }
  tapLinkClick(params) {
    this.send("guide_link_click_event", __spreadValues(__spreadValues({}, this.commonParams), params));
  }
  tapButtonClick(params) {
    this.send("guide_button_click_event", __spreadValues(__spreadValues({}, this.commonParams), params));
  }
}


/***/ }),

/***/ "./src/global/domain/guides/utils/observe.ts":
/*!***************************************************!*\
  !*** ./src/global/domain/guides/utils/observe.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createDOMObserver: () => (/* binding */ createDOMObserver)
/* harmony export */ });
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ "./node_modules/.pnpm/lodash-es@4.17.21/node_modules/lodash-es/debounce.js");

const createDOMObserver = (node, handler) => {
  let ob;
  const observerMap = /* @__PURE__ */ new Map([]);
  const trigger = () => {
    handler(node, observerMap);
  };
  const observe = (id, params) => {
    observerMap.set(id, params);
  };
  const disconnect = (id, triggerOnce) => {
    observerMap.delete(id);
    if (triggerOnce) {
      setTimeout(() => trigger());
    }
  };
  const clear = () => {
    observerMap.clear();
  };
  const destroy = () => {
    clear();
    ob == null ? void 0 : ob.disconnect();
  };
  ob = new MutationObserver((0,lodash__WEBPACK_IMPORTED_MODULE_0__["default"])(trigger, 100, { leading: false, trailing: true }));
  ob.observe(node, { subtree: true, childList: true });
  return { trigger, observe, disconnect, clear, destroy };
};


/***/ }),

/***/ "./src/global/domain/guides/utils/option.ts":
/*!**************************************************!*\
  !*** ./src/global/domain/guides/utils/option.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   filterInstances: () => (/* binding */ filterInstances)
/* harmony export */ });
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};
const filterInstances = (data, filter) => __async(void 0, null, function* () {
  const newData = [];
  for (const group of data) {
    const newItem = __spreadProps(__spreadValues({}, group), { instances: [] });
    for (const ins of group.instances) {
      const valid = yield filter(ins);
      if (valid) {
        newItem.instances.push(ins);
      }
    }
    newData.push(newItem);
  }
  return newData;
});


/***/ }),

/***/ "./src/global/domain/guides/utils/route.ts":
/*!*************************************************!*\
  !*** ./src/global/domain/guides/utils/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UNKNOWN_PATHNAME: () => (/* binding */ UNKNOWN_PATHNAME),
/* harmony export */   getPathIdentifier: () => (/* binding */ getPathIdentifier),
/* harmony export */   isPageLoaded: () => (/* binding */ isPageLoaded),
/* harmony export */   watchRouteChange: () => (/* binding */ watchRouteChange)
/* harmony export */ });
const UNKNOWN_PATHNAME = "UNKNOWN_PATHNAME";
const getPathIdentifier = () => location.pathname;
const watchRouteChange = (callback, fireImmediately = true) => {
  let prevPathname = "";
  let currPathname = getPathIdentifier();
  const handler = () => {
    prevPathname = currPathname;
    currPathname = getPathIdentifier();
    if (prevPathname !== currPathname) {
      callback(prevPathname, currPathname);
    }
  };
  window.addEventListener("popstate", handler);
  if (fireImmediately) {
    callback(prevPathname, currPathname);
  }
  return () => {
    window.removeEventListener("popstate", handler);
  };
};
const isPageLoaded = (option) => new Promise((resolve) => {
  const checkReadyState = () => {
    if (document.readyState === "complete") {
      setTimeout(() => resolve(true), option.delay || 0);
    }
  };
  document.onreadystatechange = checkReadyState;
  checkReadyState();
});


/***/ }),

/***/ "./src/global/domain/guides/utils/selector.ts":
/*!****************************************************!*\
  !*** ./src/global/domain/guides/utils/selector.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   querySelector: () => (/* binding */ querySelector),
/* harmony export */   querySelectors: () => (/* binding */ querySelectors)
/* harmony export */ });
const querySelector = (selector, node) => {
  if (node) {
    return node.querySelector(selector);
  } else {
    return document.querySelector(selector);
  }
};
const querySelectors = (selectors, node) => {
  const { targetSelector, relatedSelectors } = selectors;
  const targetSelectors = Array.isArray(targetSelector) ? targetSelector : [targetSelector];
  const existed = (relatedSelectors || []).concat(targetSelectors).every((it) => querySelector(it, node));
  return existed;
};


/***/ }),

/***/ "./src/global/domain/guides/utils/user.ts":
/*!************************************************!*\
  !*** ./src/global/domain/guides/utils/user.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isUserAccessible: () => (/* binding */ isUserAccessible)
/* harmony export */ });
const isUserAccessible = (userTypes, userInfo) => {
  return userTypes.length ? userTypes.includes(userInfo.shop_type) : true;
};


/***/ }),

/***/ "./src/global/domain/logger/base.ts":
/*!******************************************!*\
  !*** ./src/global/domain/logger/base.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Log: () => (/* binding */ Log),
/* harmony export */   Logger: () => (/* binding */ Logger),
/* harmony export */   logger: () => (/* binding */ logger)
/* harmony export */ });
/* harmony import */ var _global_utils_routers_query__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @global/utils/routers/query */ "./src/global/utils/routers/query.ts");
var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));

class Logger {
  constructor() {
    this.tmpConfig = { EVENT_ORIGIN_FEATURE: "TEMAI", data_type: "commerce_data" };
    // init之前如果调用setCommonConfig，则暂存tmpComfig，因为tea要求config在init之后调用
    this.sendEvent = (label, params) => {
      var _a;
      const wrapParams = __spreadValues(__spreadValues({}, this.getLocationConfig()), params);
      const result = __spreadValues({
        label
      }, wrapParams);
      if (true) {
        console.log("\u6211\u8981\u4E0A\u62A5\u57CB\u70B9\u5566\uFF1A", result);
      }
      (_a = window == null ? void 0 : window.collectEvent) == null ? void 0 : _a.call(window, label, wrapParams);
    };
    // 当前页面的一些参数
    this.getLocationConfig = () => {
      return {
        url: window.location.href,
        url_path: window.location.pathname,
        enter_from: (0,_global_utils_routers_query__WEBPACK_IMPORTED_MODULE_0__.getQuery)().enter_from || ""
        // 页面来源
      };
    };
  }
  setConfig(config) {
    var _a;
    if (!(window == null ? void 0 : window.isBuyinTeaInited)) {
      this.tmpConfig = __spreadValues(__spreadValues({}, this.tmpConfig), config);
    } else {
      (_a = window == null ? void 0 : window.collectEvent) == null ? void 0 : _a.call(window, "config", {
        evtParams: __spreadValues(__spreadValues(__spreadValues({}, this.getLocationConfig()), this.tmpConfig), config)
      });
      this.tmpConfig = null;
    }
  }
  init(params) {
  }
  // 上报PV/UV
  sendPageView() {
    var _a;
    (_a = this.sendEvent) == null ? void 0 : _a.call(this, "predefine_pageview", {
      title: document.title
    });
  }
  // 监听路由变化
  watchRouteChange() {
    const handler = () => {
      this.setConfig();
    };
    window.addEventListener("popstate", handler);
    return () => {
      window.removeEventListener("popstate", handler);
    };
  }
}
const logger = new Logger();
class Log {
  constructor(config) {
    this.config = {};
    this.setCommonConfig(__spreadProps(__spreadValues({}, config), { EVENT_ORIGIN_FEATURE: "TEMAI" }));
  }
  // 上报PV/UV
  sendPageView() {
    let userInfo;
    try {
      userInfo = sessionStorage.userInfo ? JSON.parse(sessionStorage.userInfo) : {};
    } catch (error) {
      userInfo = {};
    }
    const { user_id = "", shop_type = "", account_child_type = "" } = userInfo;
    this.send("predefine_pageview", {
      user_id,
      shop_type,
      account_child_type,
      title: document.title
    });
  }
  // 设置公共埋点参数
  setCommonConfig(config) {
    this.config = __spreadValues(__spreadValues({}, this.config), config);
    return this;
  }
  sendEvent(label, params) {
    const wrapParams = __spreadValues(__spreadValues(__spreadValues({}, this.getLocationConfig()), this.config), params);
    logger.sendEvent(label, wrapParams);
  }
  send(label, params) {
    const wrapParams = __spreadValues(__spreadValues(__spreadValues({}, this.getLocationConfig()), this.config), params);
    logger.sendEvent(label, wrapParams);
  }
  // 当前页面的一些参数
  getLocationConfig() {
    return {
      url: window.location.href,
      url_path: window.location.pathname,
      page_name: window.location.pathname
    };
  }
}


/***/ })

}]);
//# sourceMappingURL=src_global_domain_guides_index_tsx.bundle.js.map