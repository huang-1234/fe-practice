<!-- <body>
  <script type="text/javascript">
    iframe = document.createElement('iframe'),
      iframe.src = 'http://localhost:8080/data.php';
    document.body.appendChild(iframe);
    iframe.onload = function () {
      console.log(iframe.contentWindow.name)
    };
  </script>
</body> -->

<body>
  <script type="text/javascript">
    iframe = document.createElement('iframe');
    iframe.style.display = 'none';
    var state = 0;

    iframe.onload = function () {
      if (state === 1) {
        var data = JSON.parse(iframe.contentWindow.name);
        console.log(data);
        iframe.contentWindow.document.write('');
        iframe.contentWindow.close();
        document.body.removeChild(iframe);
      } else if (state === 0) {
        state = 1;
        iframe.contentWindow.location = 'http://localhost:81/cross-domain/proxy.html';
      }
    };

    iframe.src = 'http://localhost:8080/data.php';
    document.body.appendChild(iframe);
  </script>
</body>